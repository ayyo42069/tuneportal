name: Push Files to FTP

on:
  workflow_dispatch:  # Allows manual execution
  push:
    branches:
      - master  # Adjust if using another branch

jobs:
  push-ftp:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install lftp
        run: sudo apt-get update && sudo apt-get install -y lftp

      - name: Upload files from GitHub to FTP
        env:
          FTP_SERVER: ${{ secrets.FTP_SERVER }}
          FTP_USERNAME: ${{ secrets.FTP_USERNAME }}
          FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}
          REMOTE_PATH: "/"  # Change this if needed
        run: |
          lftp -u "$FTP_USERNAME","$FTP_PASSWORD" ftp://$FTP_SERVER <<EOF
          mirror --reverse --verbose --exclude .git/ --exclude vendor/ ./ $REMOTE_PATH
          quit
          EOF

